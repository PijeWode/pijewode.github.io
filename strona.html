<!DOCTYPE html>
<html lang="en">

<head>
  <meta http-equiv="Cache-Control" content="no-cache, no-store, must-revalidate" />
  <meta http-equiv="Pragma" content="no-cache" />
  <meta http-equiv="Expires" content="0" />
  <meta charset="utf-8" />
  <title>wait</title>

  <!-- bootstrap/JQuery link would need to be online-->
  <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.1.0/jquery.min.js"></script>
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/css/bootstrap.min.css" rel="stylesheet"
    integrity="sha384-1BmE4kWBq78iYhFldvKuhfTAU6auU8tT94WrHftjDbrCEXSU1oBoqyl2QvZ6jIW3" crossorigin="anonymous" />


  <style>
    span {
      position: absolute;
      top: 1vh;
      right: 1vw;
    }

    .crop {
      width: 100vw;
      height: 15vh;
      overflow: hidden;
    }

    .crop img {
      width: 100vw;
      height: 50vh;
    }

    table, th, tr, td{
      font-size: 3vh;
      height: fit-content;
    }
  
  </style>
</head>

<body>
  <!-- we are utilizing the iframe to load the information store in location.xml and attribute.xml-->

  <div class="crop">
    <img class="img-thumbnail rounded crop"
      src="https://ayudacloudstaticfiles.blob.core.windows.net/player/sample_designs/royalty-free-sample.jpg" />
  </div>

  <table id="attributeTable" class="table table-striped">
    <tr>
      <th colspan="5">Attribute file info</th>
    </tr>
    <tr>
      <th>Value</th>
      <th>Attribute</th>
      <th>Start Date</th>
      <th>End Date</th>
      <th>Source</th>
    </tr>
  </table>

  <table id="locationTable" class="table table-striped">
    <tr>
      <th colspan="2">Location file info</th>
    </tr>
    <tr>
      <th>Type</th>
      <th>Value</th>
    </tr>
  </table>

  <span class="badge bg-success">HTMLSample</span>

  <script>
    setTimeout(function () {
      //Perform some checks to see if the spot should be skipped or not

      $.get('location.xml')
        .done(function (data) {
          loadAndDisplayLocation(data)
        }).fail(function (error) {
          setAsInvalid(error);
        });

      $.get('attributes.xml')
        .done(function (data) {
          loadAndDisplayAttribute(data)
        }).fail(function (error) {
          setAsInvalid(error);
        });

      document.title = 'ready';
    }, 100);

    function setAsInvalid(resp) {
      (document.title.includes("skip:") ? (document.title += " " + resp.status + " " + resp.statusText) : (document.title = "skip: " + resp.status + " " + resp.statusText))
    }

    function loadAndDisplayAttribute(data) {
      /*
      Note: if attribute.xml is empty it will not display any information
      */
      const attribute = document.querySelector('#attributeTable');//we are using this to located the HTML element to display the information
      xmlDoc = data
      if (typeof data != "object") {
        const parser = new DOMParser();
        xmlDoc = parser.parseFromString(data, "text/xml");
      }

      for (child of xmlDoc.getElementsByTagName("attribute")) { //this is to parse through the attribute file
        var counter = 0;
        var row = attribute.insertRow(2);
        cell = row.insertCell(counter++);
        cell.innerHTML = child.innerHTML;
        for (attri of child.attributes) {
          cell = row.insertCell(counter++);
          cell.innerHTML = attri.nodeValue;
        }
      }
    }

    function loadAndDisplayLocation(data) {
      const location = document.querySelector("#locationTable"); //we are using this to located the HTML element to display the information
      xmlDoc = data
      if (typeof data != "object") {
        const parser = new DOMParser();
        xmlDoc = parser.parseFromString(data, "text/xml");
      }

      const toDisplay = ["FaceNumber", "Longitude", "Latitude", "FaceDescription", "FaceID", "City"]; // information to display
      for (item of toDisplay) {
        var row = location.insertRow(2);
        cell = row.insertCell(0);
        cell.innerHTML = item;
        cell = row.insertCell(1);
        cell.innerHTML = xmlDoc.getElementsByTagName(item)[0].innerHTML;
      }
    }

    function play() {
      /*
      anything that the user wants to play
      music, video, etc
      */
    }

    function pause() {
      /*
     anything that the user wants to pause
     music, video, etc
     */
    }

  </script>
</body>

</html>